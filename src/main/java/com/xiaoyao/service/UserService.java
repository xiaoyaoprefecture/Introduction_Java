package com.xiaoyao.service;

import java.util.List;
import java.util.Random;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.xiaoyao.bean.User;
import com.xiaoyao.bean.User_Short;
import com.xiaoyao.dao.UserDao;

@Service
public class UserService {
	@Autowired
	private UserDao ud;
	
	//定义一个登录的方法
	public boolean login(String UserAccount,String password) {
		User_Short us=new User_Short(UserAccount,password);
		List<User> list =ud.selectUserByUserNameAndPassword(us);
		if(list.size()>0) {
			return true;
		}else {
			return false;
		}
	}
	
	public List<User>selectAll(){
		return ud.selectAll();
	}
	
	//定义一个添加用户的方法
	public boolean addUser(String userName,String password,String sex) {
		if (isHave(userName)) {
			return false;
		}else {//没有当前用户输入的昵称
			//定义一个函数随机生成账号
			String userAccount=randomAccount();
			System.out.println("随机生成的账号是:"+userAccount);
			
			ud.addUser(new User(0,userName,password,userAccount,sex));
			return true;
		}
	}
	//定义一个函数随机生成账号
	private String randomAccount() {
		// TODO Auto-generated method stub
		String userAccount="";
		for(int i=0;i<6;i++) {
			userAccount+=new Random().nextInt(10);
		}
		return userAccount;
	}

	//添加一个判断用户是否存在的方法
	public boolean isHave(String userName) {
		List<User> list=selectUserByUserName(userName);
		return list.size()>0?true:false;
	}
	//根据用户名查询用户
	public List<User>selectUserByUserName(String userName){
		return ud.selectUserByUserName(userName);
	}
	//根据账号查询用户
	public List<User>selectUserByUserAccount(String userAccount){
		return ud.selectUserByUserAccount(userAccount);
	}
}
